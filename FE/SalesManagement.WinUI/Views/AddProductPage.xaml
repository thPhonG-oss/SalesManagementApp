<Page
    x:Class="SalesManagement.WinUI.Views.AddProductPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Padding="40">

            <!-- Card -->
            <Border
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="12"
                Padding="30"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1">

                <StackPanel Spacing="20">

                    <!-- Header -->
                    <StackPanel Orientation="Horizontal"
                                VerticalAlignment="Center"
                                Spacing="12">

                        <Button Content="← Quay lại"
                                Click="BackButton_Click"/>

                        <TextBlock Text="Thêm sản phẩm mới"
                                   FontSize="26"
                                   FontWeight="SemiBold"
                                   Foreground="{ThemeResource TextFillColorPrimaryBrush}"
                                   VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Form -->
                    <Grid ColumnSpacing="20" RowSpacing="14">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1.2*"/>
                            <ColumnDefinition Width="3*"/>
                        </Grid.ColumnDefinitions>

                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Tên -->
                        <TextBlock Text="Tên sản phẩm:"
                                   Grid.Row="0"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <TextBox Text="{Binding ProductName, Mode=TwoWay}"
                                 Grid.Row="0" Grid.Column="1"/>

                        <!-- Tác giả -->
                        <TextBlock Text="Tác giả:"
                                   Grid.Row="1"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <TextBox Text="{Binding Author, Mode=TwoWay}"
                                 Grid.Row="1" Grid.Column="1"/>

                        <!-- NXB -->
                        <TextBlock Text="Nhà xuất bản:"
                                   Grid.Row="2"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <TextBox Text="{Binding Publisher, Mode=TwoWay}"
                                 Grid.Row="2" Grid.Column="1"/>

                        <!-- Năm -->
                        <TextBlock Text="Năm xuất bản:"
                                   Grid.Row="3"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <TextBox Text="{Binding PublicationYear, Mode=TwoWay}"
                                 Grid.Row="3" Grid.Column="1"
                                 InputScope="Number"/>

                        <!-- Mô tả -->
                        <TextBlock Text="Mô tả:"
                                   Grid.Row="4"
                                   VerticalAlignment="Top"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <TextBox Text="{Binding Description, Mode=TwoWay}"
                                 Grid.Row="4" Grid.Column="1"
                                 AcceptsReturn="True"
                                 Height="100"
                                 TextWrapping="Wrap"/>

                        <!-- Giá -->
                        <TextBlock Text="Giá:"
                                   Grid.Row="5"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <NumberBox Value="{Binding Price, Mode=TwoWay}"
                                   Grid.Row="5" Grid.Column="1"/>

                        <!-- Số lượng -->
                        <TextBlock Text="Số lượng tồn kho:"
                                   Grid.Row="6"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <TextBox Text="{Binding StockQuantity, Mode=TwoWay}"
                                 Grid.Row="6" Grid.Column="1"
                                 InputScope="Number"/>

                        <!-- Tồn kho tối thiểu -->
                        <TextBlock Text="Tồn kho tối thiểu:"
                                   Grid.Row="7"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <TextBox Text="{Binding MinStockQuantity, Mode=TwoWay}"
                                 Grid.Row="7" Grid.Column="1"
                                 InputScope="Number"/>

                        <!-- Danh mục -->
                        <TextBlock Text="Danh mục:"
                                   Grid.Row="8"
                                   Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                        <ComboBox ItemsSource="{Binding Categories}"
                                  SelectedValue="{Binding SelectedCategoryId, Mode=TwoWay}"
                                  SelectedValuePath="CategoryId"
                                  DisplayMemberPath="CategoryName"
                                  Grid.Row="8" Grid.Column="1"/>
                    </Grid>

                    <!-- Footer -->
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Right"
                                Spacing="12">

                        <!-- Error -->
                        <TextBlock Text="{Binding Message}"
                                   Foreground="{ThemeResource SystemFillColorCriticalBrush}"
                                   Visibility="{Binding Message, Converter={StaticResource StringNotEmptyToVisibilityConverter}}"/>

                        <!-- Success -->
                        <TextBlock Text="{Binding MessageTrue}"
                                   Foreground="{ThemeResource SystemFillColorSuccessBrush}"
                                   Visibility="{Binding MessageTrue, Converter={StaticResource StringNotEmptyToVisibilityConverter}}"/>

                        <Button Content="Thêm sản phẩm"
                                Command="{Binding CreateProductCommand}"
                                Style="{StaticResource AccentButtonStyle}"
                                Width="160"
                                Height="40"/>
                    </StackPanel>

                </StackPanel>
            </Border>
        </Grid>
    </ScrollViewer>
</Page>
