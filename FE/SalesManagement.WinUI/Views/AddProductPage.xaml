<Page
    x:Class="SalesManagement.WinUI.Views.AddProductPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Padding="40">

            <Border Background="White"
                    CornerRadius="12"
                    Padding="30"
                    >
                <StackPanel Spacing="20">

                    <!-- Header -->
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Spacing="8">
                        <Button Content="← Quay lại"
                                Click="BackButton_Click"
                                Width="100"/>
                        <TextBlock Text="Thêm sản phẩm mới"
                                   FontSize="26"
                                   FontWeight="SemiBold"
                                   VerticalAlignment="Center"
                                   Margin="10,0,0,0"/>
                    </StackPanel>


                    <!-- Form Grid -->
                    <Grid ColumnSpacing="20" RowSpacing="12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1*"/>
                            <ColumnDefinition Width="3*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Text="Tên sản phẩm:" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding ProductName, Mode=TwoWay}" Grid.Row="0" Grid.Column="1"/>

                        <TextBlock Text="Tác giả:" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding Author, Mode=TwoWay}" Grid.Row="1" Grid.Column="1"/>

                        <TextBlock Text="Nhà xuất bản:" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding Publisher, Mode=TwoWay}" Grid.Row="2" Grid.Column="1"/>

                        <TextBlock Text="Năm xuất bản:" Grid.Row="3" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding PublicationYear, Mode=TwoWay}" Grid.Row="3" Grid.Column="1" InputScope="Number"/>

                        <TextBlock Text="Mô tả:" Grid.Row="4" Grid.Column="0" VerticalAlignment="Top"/>
                        <TextBox Text="{Binding Description, Mode=TwoWay}"
                                 Grid.Row="4" Grid.Column="1" AcceptsReturn="True" Height="100" TextWrapping="Wrap"/>

                        <TextBlock Text="Giá:" Grid.Row="5" Grid.Column="0" VerticalAlignment="Center"/>
                        <NumberBox Value="{Binding Price, Mode=TwoWay}" Grid.Row="5" Grid.Column="1"/>

                        <TextBlock Text="Số lượng tồn kho:" Grid.Row="6" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding StockQuantity, Mode=TwoWay}" Grid.Row="6" Grid.Column="1" InputScope="Number"/>

                        <TextBlock Text="Tồn kho tối thiểu:" Grid.Row="7" Grid.Column="0" VerticalAlignment="Center"/>
                        <TextBox Text="{Binding MinStockQuantity, Mode=TwoWay}" Grid.Row="7" Grid.Column="1" InputScope="Number"/>

                        <TextBlock Text="Danh mục:" Grid.Row="8" Grid.Column="0" VerticalAlignment="Center"/>
                        <ComboBox ItemsSource="{Binding Categories}"
                                  SelectedValue="{Binding SelectedCategoryId, Mode=TwoWay}"
                                  SelectedValuePath="CategoryId"
                                  DisplayMemberPath="CategoryName"
                                  Grid.Row="8" Grid.Column="1"/>
                    </Grid>

                    <!-- Footer -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="12">
                        <TextBlock Text="{Binding Message}"
                                   Foreground="Red"
                                   VerticalAlignment="Center"
                                   Visibility="{Binding Message, Converter={StaticResource StringNotEmptyToVisibilityConverter}}"/>
                        <TextBlock Text="{Binding MessageTrue}"
                                   Foreground="Green"
                                   VerticalAlignment="Center"
                                   Visibility="{Binding MessageTrue, Converter={StaticResource StringNotEmptyToVisibilityConverter}}"/>

                        <Button Content="Thêm sản phẩm"
                                Command="{Binding CreateProductCommand}"
                                Style="{StaticResource AccentButtonStyle}"
                                Width="160"
                                Height="40"/>
                    </StackPanel>

                </StackPanel>
            </Border>
        </Grid>
    </ScrollViewer>
</Page>
