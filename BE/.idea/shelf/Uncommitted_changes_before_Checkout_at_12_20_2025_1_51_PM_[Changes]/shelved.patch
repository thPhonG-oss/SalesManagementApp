Index: sales-management/src/main/java/com/project/sales_management/services/Impl/StatisticsService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/sales-management/src/main/java/com/project/sales_management/services/Impl/StatisticsService.java b/sales-management/src/main/java/com/project/sales_management/services/Impl/StatisticsService.java
new file mode 100644
--- /dev/null	(date 1766213267724)
+++ b/sales-management/src/main/java/com/project/sales_management/services/Impl/StatisticsService.java	(date 1766213267724)
@@ -0,0 +1,247 @@
+package com.project.sales_management.services.Impl;
+
+import com.project.sales_management.dtos.requests.ProductSalesSeriesData;
+import com.project.sales_management.dtos.responses.ProductSalesChartResponse;
+import com.project.sales_management.dtos.responses.RevenueChartResponse;
+import com.project.sales_management.models.OrderStatus;
+import com.project.sales_management.models.PeriodType;
+import com.project.sales_management.repositories.StatisticsRepository;
+import lombok.RequiredArgsConstructor;
+import lombok.extern.slf4j.Slf4j;
+import org.springframework.stereotype.Service;
+
+import java.time.LocalDate;
+import java.time.LocalDateTime;
+import java.time.format.DateTimeFormatter;
+import java.util.*;
+
+@Slf4j
+@Service
+@RequiredArgsConstructor
+public class StatisticsService {
+
+    private final StatisticsRepository statisticsRepository;
+
+    /**
+     * Lấy thống kê sản phẩm bán theo period
+     */
+    public ProductSalesChartResponse getProductSalesStatistics(
+            LocalDate startDate,
+            LocalDate endDate,
+            PeriodType period) {
+
+        LocalDateTime startDateTime = startDate.atStartOfDay();
+        LocalDateTime endDateTime = endDate.atTime(23, 59, 59);
+
+        List<Object[]> rawData;
+
+        switch (period) {
+            case DAY -> rawData = statisticsRepository.findProductSalesByDateRange(
+                    startDateTime, endDateTime, OrderStatus.COMPLETED);
+            case WEEK -> rawData = statisticsRepository.findProductSalesByWeek(
+                    startDateTime, endDateTime, OrderStatus.COMPLETED);
+            case MONTH -> rawData = statisticsRepository.findProductSalesByMonth(
+                    startDateTime, endDateTime, OrderStatus.COMPLETED);
+            case YEAR -> rawData = statisticsRepository.findProductSalesByYear(
+                    startDateTime, endDateTime, OrderStatus.COMPLETED);
+            default -> throw new IllegalArgumentException("Invalid period type");
+        }
+
+        return buildProductSalesChart(rawData, period);
+    }
+
+    /**
+     * Lấy thống kê doanh thu và lợi nhuận theo period
+     */
+    public RevenueChartResponse getRevenueStatistics(
+            LocalDate startDate,
+            LocalDate endDate,
+            PeriodType period) {
+
+        LocalDateTime startDateTime = startDate.atStartOfDay();
+        LocalDateTime endDateTime = endDate.atTime(23, 59, 59);
+
+        List<Object[]> rawData;
+
+        switch (period) {
+            case DAY -> rawData = statisticsRepository.findRevenueByDateRange(
+                    startDateTime, endDateTime, OrderStatus.COMPLETED);
+            case WEEK -> rawData = statisticsRepository.findRevenueByWeek(
+                    startDateTime, endDateTime, OrderStatus.COMPLETED);
+            case MONTH -> rawData = statisticsRepository.findRevenueByMonth(
+                    startDateTime, endDateTime, OrderStatus.COMPLETED);
+            case YEAR -> rawData = statisticsRepository.findRevenueByYear(
+                    startDateTime, endDateTime, OrderStatus.COMPLETED);
+            default -> throw new IllegalArgumentException("Invalid period type");
+        }
+
+        return buildRevenueChart(rawData, period);
+    }
+
+    /**
+     * Build chart data cho sản phẩm bán
+     */
+    private ProductSalesChartResponse buildProductSalesChart(
+            List<Object[]> rawData,
+            PeriodType period) {
+
+        // Map để lưu data theo product
+        Map<Long, ProductSalesSeriesData> productMap = new LinkedHashMap<>();
+        Set<String> labelSet = new LinkedHashSet<>();
+
+        for (Object[] row : rawData) {
+            Long productId = ((Number) row[0]).longValue();
+            String productName = (String) row[1];
+            String label = formatLabel(row, period);
+            Integer quantity = ((Number) row[getQuantityIndex(period)]).intValue();
+
+            labelSet.add(label);
+
+            productMap.putIfAbsent(productId, ProductSalesSeriesData.builder()
+                    .productId(productId)
+                    .productName(productName)
+                    .data(new ArrayList<>())
+                    .build());
+        }
+
+        // Convert labels to list
+        List<String> labels = new ArrayList<>(labelSet);
+
+        // Fill data for each product
+        for (Object[] row : rawData) {
+            Long productId = ((Number) row[0]).longValue();
+            String label = formatLabel(row, period);
+            Integer quantity = ((Number) row[getQuantityIndex(period)]).intValue();
+
+            ProductSalesSeriesData series = productMap.get(productId);
+            int labelIndex = labels.indexOf(label);
+
+            // Ensure list size
+            while (series.getData().size() <= labelIndex) {
+                series.getData().add(0);
+            }
+
+            series.getData().set(labelIndex, quantity);
+        }
+
+        // Fill missing data with 0
+        for (ProductSalesSeriesData series : productMap.values()) {
+            while (series.getData().size() < labels.size()) {
+                series.getData().add(0);
+            }
+        }
+
+        return ProductSalesChartResponse.builder()
+                .labels(labels)
+                .series(new ArrayList<>(productMap.values()))
+                .build();
+    }
+
+    /**
+     * Build chart data cho doanh thu
+     */
+    private RevenueChartResponse buildRevenueChart(
+            List<Object[]> rawData,
+            PeriodType period) {
+
+        List<String> labels = new ArrayList<>();
+        List<Double> revenues = new ArrayList<>();
+        List<Double> profits = new ArrayList<>();
+        List<Double> costs = new ArrayList<>();
+
+        double totalRevenue = 0;
+        double totalProfit = 0;
+        double totalCost = 0;
+
+        for (Object[] row : rawData) {
+            String label = formatRevenueLabel(row, period);
+            Double revenue = ((Number) row[getRevenueDataIndex(period)]).doubleValue();
+            Double profit = ((Number) row[getRevenueDataIndex(period) + 1]).doubleValue();
+            Double cost = ((Number) row[getRevenueDataIndex(period) + 2]).doubleValue();
+
+            labels.add(label);
+            revenues.add(revenue);
+            profits.add(profit);
+            costs.add(cost);
+
+            totalRevenue += revenue;
+            totalProfit += profit;
+            totalCost += cost;
+        }
+
+        return RevenueChartResponse.builder()
+                .labels(labels)
+                .revenue(revenues)
+                .profit(profits)
+                .cost(costs)
+                .totalRevenue(totalRevenue)
+                .totalProfit(totalProfit)
+                .totalCost(totalCost)
+                .build();
+    }
+
+    /**
+     * Format label theo period type
+     */
+    private String formatLabel(Object[] row, PeriodType period) {
+        return switch (period) {
+            case DAY -> {
+                LocalDate date = (LocalDate) row[2];
+                yield date.format(DateTimeFormatter.ofPattern("dd/MM/yyyy"));
+            }
+            case WEEK -> {
+                Integer year = ((Number) row[2]).intValue();
+                Integer week = ((Number) row[3]).intValue();
+                yield String.format("W%02d-%d", week, year);
+            }
+            case MONTH -> {
+                Integer year = ((Number) row[2]).intValue();
+                Integer month = ((Number) row[3]).intValue();
+                yield String.format("%02d/%d", month, year);
+            }
+            case YEAR -> {
+                Integer year = ((Number) row[2]).intValue();
+                yield String.valueOf(year);
+            }
+        };
+    }
+
+    private String formatRevenueLabel(Object[] row, PeriodType period) {
+        return switch (period) {
+            case DAY -> {
+                LocalDate date = (LocalDate) row[0];
+                yield date.format(DateTimeFormatter.ofPattern("dd/MM/yyyy"));
+            }
+            case WEEK -> {
+                Integer year = ((Number) row[0]).intValue();
+                Integer week = ((Number) row[1]).intValue();
+                yield String.format("W%02d-%d", week, year);
+            }
+            case MONTH -> {
+                Integer year = ((Number) row[0]).intValue();
+                Integer month = ((Number) row[1]).intValue();
+                yield String.format("%02d/%d", month, year);
+            }
+            case YEAR -> {
+                Integer year = ((Number) row[0]).intValue();
+                yield String.valueOf(year);
+            }
+        };
+    }
+
+    private int getQuantityIndex(PeriodType period) {
+        return switch (period) {
+            case DAY -> 4; // totalQuantity ở vị trí 4
+            case WEEK, MONTH -> 4; // totalQuantity ở vị trí 4
+            case YEAR -> 3; // totalQuantity ở vị trí 3
+        };
+    }
+
+    private int getRevenueDataIndex(PeriodType period) {
+        return switch (period) {
+            case DAY -> 1; // revenue bắt đầu từ index 1
+            case WEEK, MONTH -> 2; // revenue bắt đầu từ index 2
+            case YEAR -> 1; // revenue bắt đầu từ index 1
+        };
+    }
+}
\ No newline at end of file
Index: sales-management/src/main/java/com/project/sales_management/dtos/responses/ProductSalesStatResponse.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/sales-management/src/main/java/com/project/sales_management/dtos/responses/ProductSalesStatResponse.java b/sales-management/src/main/java/com/project/sales_management/dtos/responses/ProductSalesStatResponse.java
new file mode 100644
--- /dev/null	(date 1766213267727)
+++ b/sales-management/src/main/java/com/project/sales_management/dtos/responses/ProductSalesStatResponse.java	(date 1766213267727)
@@ -0,0 +1,20 @@
+package com.project.sales_management.dtos.responses;
+
+import lombok.AllArgsConstructor;
+import lombok.Builder;
+import lombok.Data;
+import lombok.NoArgsConstructor;
+
+import java.time.LocalDate;
+
+@Data
+@Builder
+@NoArgsConstructor
+@AllArgsConstructor
+public class ProductSalesStatResponse {
+    private String productName;
+    private Long productId;
+    private Integer totalQuantitySold;
+    private Double totalRevenue;
+    private LocalDate date;
+}
Index: sales-management/src/main/java/com/project/sales_management/dtos/requests/SummaryStatResponse.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/sales-management/src/main/java/com/project/sales_management/dtos/requests/SummaryStatResponse.java b/sales-management/src/main/java/com/project/sales_management/dtos/requests/SummaryStatResponse.java
new file mode 100644
--- /dev/null	(date 1766213267735)
+++ b/sales-management/src/main/java/com/project/sales_management/dtos/requests/SummaryStatResponse.java	(date 1766213267735)
@@ -0,0 +1,18 @@
+package com.project.sales_management.dtos.requests;
+
+import lombok.AllArgsConstructor;
+import lombok.Builder;
+import lombok.Data;
+import lombok.NoArgsConstructor;
+
+@Data
+@Builder
+@NoArgsConstructor
+@AllArgsConstructor
+public class SummaryStatResponse {
+    private Double totalRevenue;
+    private Double totalProfit;
+    private Double totalCost;
+    private Double averageDailyRevenue;
+    private Double profitMargin;
+}
Index: sales-management/src/main/java/com/project/sales_management/models/Order.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.project.sales_management.models;\n\nimport jakarta.persistence.*;\nimport lombok.*;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Entity\n@Table(name = \"orders\")\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Order {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = \"order_id\")\n    Long orderId;\n\n    @ManyToOne\n    @JoinColumn(name = \"customer_id\", nullable = false)\n    Customer customer;\n\n    @ManyToOne\n    @JoinColumn(name = \"promotion_id\")\n    Promotion promotion;\n\n    @Column(name = \"order_code\", nullable = false, unique = true)\n    String orderCode;\n\n    @Column(name = \"order_date\", nullable = false)\n    LocalDateTime orderDate;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"status\", nullable = false)\n    OrderStatus status;\n\n    @Column(name = \"subtotal\", nullable = false)\n    Double subTotal;\n\n    @Column(name = \"discount_amount\")\n    Double discountAmount;\n\n    @Column(name = \"total_amount\", nullable = false)\n    Double totalAmount;\n\n    @Column(name = \"notes\")\n    String notes;\n\n    @Column(name = \"shipping_address\", nullable = false)\n    String shippingAddress;\n\n    @Column(name = \"payment_method\", nullable = false)\n    PaymentMethod paymentMethod;\n\n    @Column(name = \"created_at\")\n    LocalDateTime createdAt;\n\n    @Column(name = \"updated_at\")\n    LocalDateTime updatedAt;\n\n    @OneToMany(\n        mappedBy = \"order\",\n        cascade = {CascadeType.PERSIST, CascadeType.MERGE},\n        orphanRemoval = true\n    )\n    List<OrderItem> orderItems = new ArrayList<>();\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/sales-management/src/main/java/com/project/sales_management/models/Order.java b/sales-management/src/main/java/com/project/sales_management/models/Order.java
--- a/sales-management/src/main/java/com/project/sales_management/models/Order.java	(revision 10f2c072ee29096f389785257f017d1cef96186f)
+++ b/sales-management/src/main/java/com/project/sales_management/models/Order.java	(date 1766213267667)
@@ -1,9 +1,9 @@
 package com.project.sales_management.models;
 
 import jakarta.persistence.*;
-import lombok.*;
+        import lombok.*;
 
-import java.time.LocalDate;
+        import java.time.LocalDate;
 import java.time.LocalDateTime;
 import java.util.ArrayList;
 import java.util.List;
@@ -64,9 +64,9 @@
     LocalDateTime updatedAt;
 
     @OneToMany(
-        mappedBy = "order",
-        cascade = {CascadeType.PERSIST, CascadeType.MERGE},
-        orphanRemoval = true
+            mappedBy = "order",
+            cascade = {CascadeType.PERSIST, CascadeType.MERGE},
+            orphanRemoval = true
     )
     List<OrderItem> orderItems = new ArrayList<>();
 }
Index: sales-management/src/main/java/com/project/sales_management/controllers/StatisticsController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/sales-management/src/main/java/com/project/sales_management/controllers/StatisticsController.java b/sales-management/src/main/java/com/project/sales_management/controllers/StatisticsController.java
new file mode 100644
--- /dev/null	(date 1766213267753)
+++ b/sales-management/src/main/java/com/project/sales_management/controllers/StatisticsController.java	(date 1766213267753)
@@ -0,0 +1,124 @@
+package com.project.sales_management.controllers;
+
+
+import com.project.sales_management.dtos.requests.SummaryStatResponse;
+import com.project.sales_management.dtos.responses.*;
+import com.project.sales_management.models.PeriodType;
+import com.project.sales_management.services.Impl.StatisticsService;
+import lombok.RequiredArgsConstructor;
+import lombok.extern.slf4j.Slf4j;
+import org.springframework.format.annotation.DateTimeFormat;
+import org.springframework.http.ResponseEntity;
+import org.springframework.web.bind.annotation.*;
+
+import java.time.LocalDate;
+
+@Slf4j
+@RestController
+@RequestMapping("/api/statistics")
+@RequiredArgsConstructor
+public class StatisticsController {
+
+    private final StatisticsService statisticsService;
+
+    /**
+     * API: Thống kê sản phẩm bán theo thời gian
+     * GET /api/statistics/product-sales
+     *
+     * @param startDate Ngày bắt đầu (format: yyyy-MM-dd)
+     * @param endDate Ngày kết thúc (format: yyyy-MM-dd)
+     * @param period Loại period: DAY, WEEK, MONTH, YEAR
+     * @return ProductSalesChartResponse - Dữ liệu cho biểu đồ đường
+     *
+     * Example:
+     * GET /api/statistics/product-sales?startDate=2024-01-01&endDate=2024-12-31&period=MONTH
+     */
+    @GetMapping("/product-sales")
+    public ResponseEntity<ApiResponse<ProductSalesChartResponse>> getProductSalesStatistics(
+            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate startDate,
+            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate endDate,
+            @RequestParam String period) {
+
+        log.info("Get product sales statistics: {} to {}, period: {}", startDate, endDate, period);
+
+        PeriodType periodType = PeriodType.valueOf(period.toUpperCase());
+        ProductSalesChartResponse response = statisticsService.getProductSalesStatistics(
+                startDate, endDate, periodType);
+
+        return ResponseEntity.ok(ApiResponse.<ProductSalesChartResponse>builder()
+                .success(true)
+                .code("1000")
+                .message("Get product sales statistics successfully")
+                .data(response)
+                .build());
+    }
+
+    /**
+     * API: Thống kê doanh thu và lợi nhuận theo thời gian
+     * GET /api/statistics/revenue
+     *
+     * @param startDate Ngày bắt đầu (format: yyyy-MM-dd)
+     * @param endDate Ngày kết thúc (format: yyyy-MM-dd)
+     * @param period Loại period: DAY, WEEK, MONTH, YEAR
+     * @return RevenueChartResponse - Dữ liệu cho biểu đồ cột/bánh
+     *
+     * Example:
+     * GET /api/statistics/revenue?startDate=2024-01-01&endDate=2024-12-31&period=MONTH
+     */
+    @GetMapping("/revenue")
+    public ResponseEntity<ApiResponse<RevenueChartResponse>> getRevenueStatistics(
+            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate startDate,
+            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate endDate,
+            @RequestParam String period) {
+
+        log.info("Get revenue statistics: {} to {}, period: {}", startDate, endDate, period);
+
+        PeriodType periodType = PeriodType.valueOf(period.toUpperCase());
+        RevenueChartResponse response = statisticsService.getRevenueStatistics(
+                startDate, endDate, periodType);
+
+        return ResponseEntity.ok(ApiResponse.<RevenueChartResponse>builder()
+                .success(true)
+                .code("1000")
+                .message("Get revenue statistics successfully")
+                .data(response)
+                .build());
+    }
+
+    /**
+     * API: Thống kê tổng hợp nhanh (Dashboard)
+     * GET /api/statistics/summary
+     *
+     * @param startDate Ngày bắt đầu
+     * @param endDate Ngày kết thúc
+     * @return Tổng hợp các chỉ số chính
+     */
+    @GetMapping("/summary")
+    public ResponseEntity<ApiResponse<SummaryStatResponse>> getSummaryStatistics(
+            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate startDate,
+            @RequestParam @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate endDate) {
+
+        log.info("Get summary statistics: {} to {}", startDate, endDate);
+
+        // Lấy dữ liệu theo ngày để tính tổng
+        RevenueChartResponse revenueData = statisticsService.getRevenueStatistics(
+                startDate, endDate, PeriodType.DAY);
+
+        SummaryStatResponse summary = SummaryStatResponse.builder()
+                .totalRevenue(revenueData.getTotalRevenue())
+                .totalProfit(revenueData.getTotalProfit())
+                .totalCost(revenueData.getTotalCost())
+                .averageDailyRevenue(revenueData.getTotalRevenue() / revenueData.getLabels().size())
+                .profitMargin(revenueData.getTotalRevenue() > 0
+                        ? (revenueData.getTotalProfit() / revenueData.getTotalRevenue()) * 100
+                        : 0)
+                .build();
+
+        return ResponseEntity.ok(ApiResponse.<SummaryStatResponse>builder()
+                .success(true)
+                .code("1000")
+                .message("Get summary statistics successfully")
+                .data(summary)
+                .build());
+    }
+}
\ No newline at end of file
Index: sales-management/src/main/java/com/project/sales_management/dtos/responses/RevenueStatResponse.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/sales-management/src/main/java/com/project/sales_management/dtos/responses/RevenueStatResponse.java b/sales-management/src/main/java/com/project/sales_management/dtos/responses/RevenueStatResponse.java
new file mode 100644
--- /dev/null	(date 1766213267758)
+++ b/sales-management/src/main/java/com/project/sales_management/dtos/responses/RevenueStatResponse.java	(date 1766213267758)
@@ -0,0 +1,20 @@
+package com.project.sales_management.dtos.responses;
+
+import lombok.AllArgsConstructor;
+import lombok.Builder;
+import lombok.Data;
+import lombok.NoArgsConstructor;
+
+import java.time.LocalDate;
+
+@Data
+@Builder
+@NoArgsConstructor
+@AllArgsConstructor
+public class RevenueStatResponse {
+    private LocalDate date;
+    private Double revenue;
+    private Double profit;
+    private Double cost;
+    private Integer orderCount;
+}
Index: sales-management/src/main/java/com/project/sales_management/models/OrderStatus.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.project.sales_management.models;\n\npublic enum OrderStatus {\n    CREATED,\n    PAID,\n    CANCELLED,\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/sales-management/src/main/java/com/project/sales_management/models/OrderStatus.java b/sales-management/src/main/java/com/project/sales_management/models/OrderStatus.java
--- a/sales-management/src/main/java/com/project/sales_management/models/OrderStatus.java	(revision 10f2c072ee29096f389785257f017d1cef96186f)
+++ b/sales-management/src/main/java/com/project/sales_management/models/OrderStatus.java	(date 1766213267675)
@@ -4,4 +4,5 @@
     CREATED,
     PAID,
     CANCELLED,
+    COMPLETED
 }
Index: sales-management/src/main/java/com/project/sales_management/dtos/responses/ProductSalesChartResponse.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/sales-management/src/main/java/com/project/sales_management/dtos/responses/ProductSalesChartResponse.java b/sales-management/src/main/java/com/project/sales_management/dtos/responses/ProductSalesChartResponse.java
new file mode 100644
--- /dev/null	(date 1766213267764)
+++ b/sales-management/src/main/java/com/project/sales_management/dtos/responses/ProductSalesChartResponse.java	(date 1766213267764)
@@ -0,0 +1,18 @@
+package com.project.sales_management.dtos.responses;
+
+import com.project.sales_management.dtos.requests.ProductSalesSeriesData;
+import lombok.AllArgsConstructor;
+import lombok.Builder;
+import lombok.Data;
+import lombok.NoArgsConstructor;
+
+import java.util.List;
+
+@Data
+@Builder
+@NoArgsConstructor
+@AllArgsConstructor
+public class ProductSalesChartResponse {
+    private List<String> labels; // Nhãn thời gian (ngày, tuần, tháng)
+    private List<ProductSalesSeriesData> series;
+}
Index: sales-management/src/main/java/com/project/sales_management/dtos/requests/ProductSalesSeriesData.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/sales-management/src/main/java/com/project/sales_management/dtos/requests/ProductSalesSeriesData.java b/sales-management/src/main/java/com/project/sales_management/dtos/requests/ProductSalesSeriesData.java
new file mode 100644
--- /dev/null	(date 1766213267769)
+++ b/sales-management/src/main/java/com/project/sales_management/dtos/requests/ProductSalesSeriesData.java	(date 1766213267769)
@@ -0,0 +1,18 @@
+package com.project.sales_management.dtos.requests;
+
+import lombok.AllArgsConstructor;
+import lombok.Builder;
+import lombok.Data;
+import lombok.NoArgsConstructor;
+
+import java.util.List;
+
+@Data
+@Builder
+@NoArgsConstructor
+@AllArgsConstructor
+public class ProductSalesSeriesData {
+    private String productName;
+    private Long productId;
+    private List<Integer> data;
+}
Index: sales-management/src/main/java/com/project/sales_management/dtos/responses/RevenueChartResponse.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/sales-management/src/main/java/com/project/sales_management/dtos/responses/RevenueChartResponse.java b/sales-management/src/main/java/com/project/sales_management/dtos/responses/RevenueChartResponse.java
new file mode 100644
--- /dev/null	(date 1766213267696)
+++ b/sales-management/src/main/java/com/project/sales_management/dtos/responses/RevenueChartResponse.java	(date 1766213267696)
@@ -0,0 +1,22 @@
+package com.project.sales_management.dtos.responses;
+
+import lombok.AllArgsConstructor;
+import lombok.Builder;
+import lombok.Data;
+import lombok.NoArgsConstructor;
+
+import java.util.List;
+
+@Data
+@Builder
+@NoArgsConstructor
+@AllArgsConstructor
+public class RevenueChartResponse {
+    private List<String> labels; // Nhãn thời gian
+    private List<Double> revenue; // Doanh thu
+    private List<Double> profit; // Lợi nhuận
+    private List<Double> cost; // Chi phí
+    private Double totalRevenue;
+    private Double totalProfit;
+    private Double totalCost;
+}
Index: sales-management/src/main/java/com/project/sales_management/dtos/requests/StatisticsRequest.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/sales-management/src/main/java/com/project/sales_management/dtos/requests/StatisticsRequest.java b/sales-management/src/main/java/com/project/sales_management/dtos/requests/StatisticsRequest.java
new file mode 100644
--- /dev/null	(date 1766213267696)
+++ b/sales-management/src/main/java/com/project/sales_management/dtos/requests/StatisticsRequest.java	(date 1766213267696)
@@ -0,0 +1,11 @@
+package com.project.sales_management.dtos.requests;
+
+import java.time.LocalDate;
+
+public class StatisticsRequest {
+    private LocalDate startDate;
+    private LocalDate endDate;
+    private String period; // "DAY", "WEEK", "MONTH", "YEAR"
+    private Long categoryId; // Optional: filter theo category
+    private Long productId;
+}
Index: sales-management/src/main/java/com/project/sales_management/models/PeriodType.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/sales-management/src/main/java/com/project/sales_management/models/PeriodType.java b/sales-management/src/main/java/com/project/sales_management/models/PeriodType.java
new file mode 100644
--- /dev/null	(date 1766213267696)
+++ b/sales-management/src/main/java/com/project/sales_management/models/PeriodType.java	(date 1766213267696)
@@ -0,0 +1,8 @@
+package com.project.sales_management.models;
+
+public enum PeriodType {
+    DAY,
+    WEEK,
+    MONTH,
+    YEAR
+}
\ No newline at end of file
Index: sales-management/src/main/java/com/project/sales_management/repositories/StatisticsRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/sales-management/src/main/java/com/project/sales_management/repositories/StatisticsRepository.java b/sales-management/src/main/java/com/project/sales_management/repositories/StatisticsRepository.java
new file mode 100644
--- /dev/null	(date 1766213267716)
+++ b/sales-management/src/main/java/com/project/sales_management/repositories/StatisticsRepository.java	(date 1766213267716)
@@ -0,0 +1,184 @@
+package com.project.sales_management.repositories;
+
+import com.project.sales_management.models.Order;
+import com.project.sales_management.models.OrderStatus;
+import org.springframework.data.jpa.repository.JpaRepository;
+import org.springframework.data.jpa.repository.Query;
+import org.springframework.data.repository.query.Param;
+
+import java.time.LocalDateTime;
+import java.util.List;
+
+public interface StatisticsRepository extends JpaRepository<Order,Long> {
+    // Thống kê sản phẩm bán theo thời gian
+    @Query("""
+        SELECT 
+            p.productId as productId,
+            p.productName as productName,
+            CAST(o.orderDate AS DATE) as orderDate,
+            SUM(oi.quantity) as totalQuantity,
+            SUM(oi.totalPrice) as totalRevenue
+        FROM Order o
+        JOIN o.orderItems oi
+        JOIN oi.product p
+        WHERE o.orderDate BETWEEN :startDate AND :endDate
+        AND o.status = :status
+        GROUP BY p.productId, p.productName, CAST(o.orderDate AS DATE)
+        ORDER BY CAST(o.orderDate AS DATE), p.productName
+    """)
+    List<Object[]> findProductSalesByDateRange(
+            @Param("startDate") LocalDateTime startDate,
+            @Param("endDate") LocalDateTime endDate,
+            @Param("status") OrderStatus status
+    );
+
+    // Thống kê sản phẩm bán theo tuần
+    @Query("""
+        SELECT 
+            p.productId as productId,
+            p.productName as productName,
+            YEAR(o.orderDate) as year,
+            WEEK(o.orderDate) as week,
+            SUM(oi.quantity) as totalQuantity,
+            SUM(oi.totalPrice) as totalRevenue
+        FROM Order o
+        JOIN o.orderItems oi
+        JOIN oi.product p
+        WHERE o.orderDate BETWEEN :startDate AND :endDate
+        AND o.status = :status
+        GROUP BY p.productId, p.productName, YEAR(o.orderDate), WEEK(o.orderDate)
+        ORDER BY year, week, p.productName
+    """)
+    List<Object[]> findProductSalesByWeek(
+            @Param("startDate") LocalDateTime startDate,
+            @Param("endDate") LocalDateTime endDate,
+            @Param("status") OrderStatus status
+    );
+
+    // Thống kê sản phẩm bán theo tháng
+    @Query("""
+        SELECT 
+            p.productId as productId,
+            p.productName as productName,
+            YEAR(o.orderDate) as year,
+            MONTH(o.orderDate) as month,
+            SUM(oi.quantity) as totalQuantity,
+            SUM(oi.totalPrice) as totalRevenue
+        FROM Order o
+        JOIN o.orderItems oi
+        JOIN oi.product p
+        WHERE o.orderDate BETWEEN :startDate AND :endDate
+        AND o.status = :status
+        GROUP BY p.productId, p.productName, YEAR(o.orderDate), MONTH(o.orderDate)
+        ORDER BY year, month, p.productName
+    """)
+    List<Object[]> findProductSalesByMonth(
+            @Param("startDate") LocalDateTime startDate,
+            @Param("endDate") LocalDateTime endDate,
+            @Param("status") OrderStatus status
+    );
+
+    // Thống kê sản phẩm bán theo năm
+    @Query("""
+        SELECT 
+            p.productId as productId,
+            p.productName as productName,
+            YEAR(o.orderDate) as year,
+            SUM(oi.quantity) as totalQuantity,
+            SUM(oi.totalPrice) as totalRevenue
+        FROM Order o
+        JOIN o.orderItems oi
+        JOIN oi.product p
+        WHERE o.orderDate BETWEEN :startDate AND :endDate
+        AND o.status = :status
+        GROUP BY p.productId, p.productName, YEAR(o.orderDate)
+        ORDER BY year, p.productName
+    """)
+    List<Object[]> findProductSalesByYear(
+            @Param("startDate") LocalDateTime startDate,
+            @Param("endDate") LocalDateTime endDate,
+            @Param("status") OrderStatus status
+    );
+
+    // Thống kê doanh thu theo ngày
+    @Query("""
+        SELECT 
+            CAST(o.orderDate AS DATE) as orderDate,
+            SUM(o.totalAmount) as revenue,
+            SUM(o.totalAmount - o.subTotal) as profit,
+            SUM(o.subTotal) as cost,
+            COUNT(o.orderId) as orderCount
+        FROM Order o
+        WHERE o.orderDate BETWEEN :startDate AND :endDate
+        AND o.status = :status
+        GROUP BY CAST(o.orderDate AS DATE)
+        ORDER BY CAST(o.orderDate AS DATE)
+    """)
+    List<Object[]> findRevenueByDateRange(
+            @Param("startDate") LocalDateTime startDate,
+            @Param("endDate") LocalDateTime endDate,
+            @Param("status") OrderStatus status
+    );
+
+    // Thống kê doanh thu theo tuần
+    @Query("""
+        SELECT 
+            YEAR(o.orderDate) as year,
+            WEEK(o.orderDate) as week,
+            SUM(o.totalAmount) as revenue,
+            SUM(o.totalAmount - o.subTotal) as profit,
+            SUM(o.subTotal) as cost,
+            COUNT(o.orderId) as orderCount
+        FROM Order o
+        WHERE o.orderDate BETWEEN :startDate AND :endDate
+        AND o.status = :status
+        GROUP BY YEAR(o.orderDate), WEEK(o.orderDate)
+        ORDER BY year, week
+    """)
+    List<Object[]> findRevenueByWeek(
+            @Param("startDate") LocalDateTime startDate,
+            @Param("endDate") LocalDateTime endDate,
+            @Param("status") OrderStatus status
+    );
+
+    // Thống kê doanh thu theo tháng
+    @Query("""
+        SELECT 
+            YEAR(o.orderDate) as year,
+            MONTH(o.orderDate) as month,
+            SUM(o.totalAmount) as revenue,
+            SUM(o.totalAmount - o.subTotal) as profit,
+            SUM(o.subTotal) as cost,
+            COUNT(o.orderId) as orderCount
+        FROM Order o
+        WHERE o.orderDate BETWEEN :startDate AND :endDate
+        AND o.status = :status
+        GROUP BY YEAR(o.orderDate), MONTH(o.orderDate)
+        ORDER BY year, month
+    """)
+    List<Object[]> findRevenueByMonth(
+            @Param("startDate") LocalDateTime startDate,
+            @Param("endDate") LocalDateTime endDate,
+            @Param("status") OrderStatus status
+    );
+
+    // Thống kê doanh thu theo năm
+    @Query("""
+        SELECT 
+            YEAR(o.orderDate) as year,
+            SUM(o.totalAmount) as revenue,
+            SUM(o.totalAmount - o.subTotal) as profit,
+            SUM(o.subTotal) as cost,
+            COUNT(o.orderId) as orderCount
+        FROM Order o
+        WHERE o.orderDate BETWEEN :startDate AND :endDate
+        AND o.status = :status
+        GROUP BY YEAR(o.orderDate)
+        ORDER BY year
+    """)
+    List<Object[]> findRevenueByYear(
+            @Param("startDate") LocalDateTime startDate,
+            @Param("endDate") LocalDateTime endDate,
+            @Param("status") OrderStatus status
+    );
+}
Index: sales-management/src/main/resources/db/migration/V1__Init_Schema.sql
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>CREATE TABLE users (\n    user_id INT AUTO_INCREMENT PRIMARY KEY,\n    username VARCHAR(50) UNIQUE NOT NULL,\n    password VARCHAR(255) NOT NULL,\n    full_name VARCHAR(100),\n    email VARCHAR(100),\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\nCREATE TABLE categories (\n    category_id INT AUTO_INCREMENT PRIMARY KEY,\n    category_name VARCHAR(100) UNIQUE NOT NULL,\n    description TEXT,\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\nCREATE TABLE products (\n    product_id INT AUTO_INCREMENT PRIMARY KEY,\n    category_id INT,\n    product_name VARCHAR(100) NOT NULL,\n    description TEXT,\n    author VARCHAR(200),\n    publisher VARCHAR(200),\n    publication_year INT,\n    price DECIMAL(15, 2) NOT NULL,\n    stock_quantity INT NOT NULL,\n    min_stock_quantity INT DEFAULT 1,\n    sold_quantity INT DEFAULT 0,\n    image_url VARCHAR(255),\n    is_active BOOLEAN DEFAULT TRUE,\n    discount_percentage DECIMAL(5, 2) DEFAULT 0,\n    is_discounted BOOLEAN DEFAULT FALSE,\n    special_price DECIMAL(15, 2),\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n    FOREIGN KEY (category_id) REFERENCES categories(category_id)\n);\n\nCREATE TABLE product_images (\n    image_id INT AUTO_INCREMENT PRIMARY KEY,\n    product_id INT NOT NULL,\n    image_url VARCHAR(500) NOT NULL,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    FOREIGN KEY (product_id) REFERENCES products(product_id) ON DELETE CASCADE\n);\n\nCREATE TABLE customers (\n    customer_id INT AUTO_INCREMENT PRIMARY KEY,\n    customer_name VARCHAR(100) NOT NULL,\n    phone VARCHAR(20) UNIQUE NOT NULL,\n    email VARCHAR(100),\n    address TEXT,\n    total_orders INT DEFAULT 0,\n    total_spent DECIMAL(15, 2) DEFAULT 0,\n    last_order_date TIMESTAMP NULL,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\nCREATE TABLE promotions (\n    promotion_id INT AUTO_INCREMENT PRIMARY KEY,\n    promotion_code VARCHAR(50) UNIQUE NOT NULL,\n    promotion_name VARCHAR(200),\n    description TEXT,\n    discount_type ENUM('PERCENTAGE', 'FIXED_AMOUNT') NOT NULL,\n    discount_value DECIMAL(15, 2),\n    min_order_value DECIMAL(15, 2) DEFAULT 0,\n    max_discount_amount DECIMAL(15, 2),\n    start_date TIMESTAMP NOT NULL,\n    end_date TIMESTAMP NOT NULL,\n    usage_limit INT,\n    used_count INT DEFAULT 0,\n    is_active BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n\nCREATE TABLE orders (\n    order_id INT AUTO_INCREMENT PRIMARY KEY,\n    customer_id INT,\n    promotion_id INT,\n    order_code VARCHAR(20) UNIQUE NOT NULL,\n    order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    status ENUM('CREATED', 'PAID', 'CANCELLED') NOT NULL DEFAULT 'CREATED',\n    subtotal DECIMAL(15, 2) NOT NULL,\n    discount_amount DECIMAL(15, 2),\n    total_amount DECIMAL(15, 2) NOT NULL,\n    notes TEXT,\n    shipping_address TEXT,\n    payment_method ENUM('CASH_ON_DELIVERY', 'CREDIT_CARD', 'BANK_TRANSFER') NOT NULL DEFAULT 'CASH_ON_DELIVERY',\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n    FOREIGN KEY (customer_id) REFERENCES customers(customer_id),\n    FOREIGN KEY (promotion_id) REFERENCES promotions(promotion_id)\n);\n\nCREATE TABLE order_items (\n    order_item_id INT AUTO_INCREMENT PRIMARY KEY,\n    order_id INT NOT NULL,\n    product_id INT NOT NULL,\n    quantity INT NOT NULL,\n    unit_price DECIMAL(15, 2),\n    discount DECIMAL(5, 2),\n    total_price DECIMAL(15, 2),\n    FOREIGN KEY (order_id) REFERENCES orders(order_id),\n    FOREIGN KEY (product_id) REFERENCES products(product_id)\n);\n\nCREATE TABLE refresh_tokens (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    user_id INT NOT NULL,\n    token VARCHAR(500) NOT NULL,\n    expires_at TIMESTAMP NOT NULL,\n    FOREIGN KEY (user_id) REFERENCES users(user_id)\n)\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/sales-management/src/main/resources/db/migration/V1__Init_Schema.sql b/sales-management/src/main/resources/db/migration/V1__Init_Schema.sql
--- a/sales-management/src/main/resources/db/migration/V1__Init_Schema.sql	(revision 10f2c072ee29096f389785257f017d1cef96186f)
+++ b/sales-management/src/main/resources/db/migration/V1__Init_Schema.sql	(date 1766213267685)
@@ -85,7 +85,7 @@
     promotion_id INT,
     order_code VARCHAR(20) UNIQUE NOT NULL,
     order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
-    status ENUM('CREATED', 'PAID', 'CANCELLED') NOT NULL DEFAULT 'CREATED',
+    status ENUM('CREATED', 'PAID', 'CANCELLED','COMPLETED') NOT NULL DEFAULT 'CREATED',
     subtotal DECIMAL(15, 2) NOT NULL,
     discount_amount DECIMAL(15, 2),
     total_amount DECIMAL(15, 2) NOT NULL,
Index: ../.idea/shelf/Uncommitted_changes_before_Checkout_at_12_20_2025_1_47_PM__Changes_.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/../.idea/shelf/Uncommitted_changes_before_Checkout_at_12_20_2025_1_47_PM__Changes_.xml b/../.idea/shelf/Uncommitted_changes_before_Checkout_at_12_20_2025_1_47_PM__Changes_.xml
new file mode 100644
--- /dev/null	(date 1766213302446)
+++ b/../.idea/shelf/Uncommitted_changes_before_Checkout_at_12_20_2025_1_47_PM__Changes_.xml	(date 1766213302446)
@@ -0,0 +1,4 @@
+<changelist name="Uncommitted_changes_before_Checkout_at_12_20_2025_1_47_PM_[Changes]" date="1766213268046" recycled="true" deleted="true">
+  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_12_20_2025_1_47_PM_[Changes]/shelved.patch" />
+  <option name="DESCRIPTION" value="Uncommitted changes before Checkout at 12/20/2025 1:47 PM [Changes]" />
+</changelist>
\ No newline at end of file
